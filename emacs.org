 # <html -*- mode: org ; coding: utf-8-with-signature -*- >
 # <script src="js/org-render.js"></script><body><!--

#+Title: The Emacs Config in Org-Mode
#+Author: Alex Stragies
#+LINK: wikipedia    https://en.wikipedia.org/wiki/
#+LINK: firewall     http://langw/
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="css/org-view.css" />
#+PROPERTY: header-args:emacs-lisp :noweb yes
#+PROPERTY: header-args:awk :tangle no :results code
#+PROPERTY: header-args:awk+ :wrap SRC emacs-lisp
#+options: toc:t

* Using this settings file and emacs

When editing the configuration tables below, keep in mind, that some tables require a PostProcessing function to be called after modification.
For the others, settings should apply automatically after restart of emacs

** Some useful default Keys                                            :Keys:
#+NAME: Table_Useful_Keys
| KeyCombo      | KeyMap | Meaning                                        |
|---------------+--------+------------------------------------------------|
| *C-u C-c C-q* |        | Realign all tags                               |
| *C-c C-c*     | org    | Execute function at point, reformat table      |
| *M-Enter*     |        | create new heading at same indent level        |
| *M-ArrowKey*  |        | promote/demote/raise/lower current heading     |
| *C-c C-l*     |        | Create/Edit org mode link                      |
| *C-c e h*     |        | Open export to HTML options                    |
| *C-c C-x*     | org    | Toggle display of entities as UTF-8 characters |
| *C-c /*       | org    | org-sparse-display                             |
| *C-c / m*     | org    | org-sparse-display match by Tag                |
| *M-S-â†‘â†’â†“â†*    | org    | in TableEditor: Remove/add Columns/Lines       |
|               |        |                                                |
*** TODO Add some more keyboard shortcuts in the usage hint section
** Custom keyboard settings

The following table contains the definition of the leader key:

#+NAME: Table-Leader-Key
| leader |
|--------|
| Ã¥      |

Change to a key easily reachable, and as of yet unused.

** Tool functions                                                     :Tools:
Nomenclature proposal:
- xxx-xxx-xxx :: callable functions
- Xxx-Xxx-XXX :: Tables

*** Color Picker                                                     :Colors:

#+NAME: My-Insert-Color-Hex
#+BEGIN_SRC emacs-lisp
(defun my-insert-color-hex ()
  "Select a color and insert its hexadecimal format."
  (interactive "*")
  (let ((buf (current-buffer)))
    (list-colors-display
     nil nil `(lambda (name)
                (interactive)
                (quit-window)
                (with-current-buffer ,buf
                  (insert (apply 'color-rgb-to-hex
                                 (color-name-to-rgb name))))))))
#+END_SRC

*** delete-file-visited-by-buffer and delete-file-and-buffer
#+BEGIN_SRC emacs-lisp
(defun delete-file-and-buffer ()
  "Kill the current buffer and deletes the file it is visiting."
  (interactive)
  (let ((filename (buffer-file-name)))
    (if filename
        (if (y-or-n-p (concat "Do you really want to delete file " filename " ?"))
            (progn
              (delete-file filename)
              (message "Deleted file %s." filename)
              (kill-buffer)))
(message "Not a file visiting buffer!"))))

(defun delete-file-visited-by-buffer (buffername)
  "Delete the file visited by the buffer named BUFFERNAME."
  (interactive "b")
  (let* ((buffer (get-buffer buffername))
         (filename (buffer-file-name buffer)))
    (when filename
      (delete-file filename)
      (kill-buffer-ask buffer))))
#+END_SRC

**** TODO Where do I use this function?

*** Add Header to tables
#+NAME: add-header-line
#+BEGIN_SRC emacs-lisp :var tbl="" :tangle no
(cons (car tbl) (cons 'hline (cdr tbl)))
#+END_SRC
* Usage
:PROPERTIES:
:CUSTOM_ID: Usage
:END:

* Emacs Configuration
** Basic User Interface Settings
*** Hide the Menu-Bar by default                                    :MenuBar:
#+BEGIN_SRC emacs-lisp
(menu-bar-mode -1)
#+END_SRC

*** Hide the Tool-Bar by default                                    :ToolBar:
#+BEGIN_SRC emacs-lisp
(tool-bar-mode -1)
#+END_SRC

*** Line and Column numbers
#+NAME: SETUP-UI-LINE-NUMS-AND-COLUMN-NUM
#+BEGIN_SRC emacs-lisp
(global-display-line-numbers-mode)
;; Enable line numbers by default for file buffers
(add-hook 'find-file-hook
   (lambda ()
     (when (and buffer-file-name  ;; Buffer is associated with a file
              (not (minibufferp))) ;; Exclude minibuffers
       (display-line-numbers-mode 1))))

;; Disable line numbers for specific buffer types
(add-hook 'buffer-list-update-hook
   (lambda ()
     (when (or (derived-mode-p 'completion-list-mode) ;; Completion buffers
               (string-match-p "\\*.*\\*" (buffer-name))) ;; Match *special* buffers
       (display-line-numbers-mode -1))))

(defun toggle-line-numbers-relative-absolute ()
  "Toggle `display-line-numbers` between 'relative and 'absolute."
  (interactive)
  (setq display-line-numbers
     (if (eq display-line-numbers 'relative)
         'absolute
       'relative))
  (message "Line numbers set to: %s" display-line-numbers))

(column-number-mode t) ; This should enable column numbers in the mode line
#+END_SRC

** Add `load-path` for `contrib` subdir
#+BEGIN_SRC emacs-lisp
(add-to-list 'load-path "~/.emacs.d/contrib/")
#+END_SRC

** Behaviours
*** Backup-Files                                                     :BACKUP:

How and where to place backups and handles for opened files, and how many version back to keep.

#+NAME: EMACS-Settings
#+BEGIN_SRC emacs-lisp
(setq backup-by-copying t      ; don't clobber symlinks
   backup-directory-alist
   '(("." . "~/.saves"))    ; don't litter my fs tree
   delete-old-versions t
   kept-new-versions 6
   kept-old-versions 2
   version-control t)       ; use versioned backups

(setq auto-save-file-name-transforms
      `((".*" ,temporary-file-directory t)))
#+END_SRC

*** Electric Pairs and Paren-Mode                              :PAIRS:PARENS:
#+BEGIN_SRC emacs-lisp
(electric-pair-mode)
(show-paren-mode t) ;; enable show paren mode
(setq show-paren-style 'expression) ;; highlight whole expression
#+END_SRC

*** Global Key Bindings
#+BEGIN_SRC emacs-lisp
; C-h normally calls 'Help'. This function can be called with F1, and via M-x help
(global-set-key (kbd "C-h") 'delete-backward-char)
#+END_SRC

* Package Configurations                                              :Setup:
** Evil

Evil is an *e*\xtensible *vi* *l*\ayer for [[http://www.gnu.org/software/emacs/][Emacs]]. It emulates the main features of [[http://www.vim.org/][Vim]], and provides facilities for writing custom extensions. Also see the page on [[http://emacswiki.org/emacs/Evil][EmacsWiki]].

#+NAME: USE-PACKAGE-evil
#+BEGIN_SRC emacs-lisp
;â”Œâ” Evil Mode: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(use-package evil
  :ensure t
  :init
  (evil-mode 1)  ;; Enable evil-mode
  :config
  (global-evil-surround-mode 1)
  (global-evil-matchit-mode 1)

  ;; Keybindings
  (define-key evil-motion-state-map "Ã¶" 'evil-ex)
  (define-key evil-normal-state-map (kbd "âˆš") 'er/expand-region)
  (define-key evil-normal-state-map (kbd "â€œ") 'ace-jump-mode)
  (define-key evil-motion-state-map (kbd "TAB") 'org-cycle)
  )
#+END_SRC

*** Evil-Leader
#+NAME: USE-PACKAGE-evil-leader
#+BEGIN_SRC emacs-lisp :var leader=Table-Leader-Key[2,0]
; evil-leader, VI leader key plugin
(use-package evil-leader
  :ensure t
  :after evil
  :config
  (global-evil-leader-mode)
  (evil-leader/set-leader leader)
  (evil-leader/set-key
   "e" 'find-file
   "b" 'switch-to-buffer
   "C" 'hl-line-mode
   "c" 'my-insert-color-hex
   "h" 'helm-M-x
   "l" 'display-line-numbers-mode
   "f" 'display-fill-column-indicator-mode
   "s" 'cycle-ispell-languages
   "R" 'rainbow-delimiters-mode
   "F" 'set-abbrev-lang-to-French
   "Z" 'vimish-fold-delete
   "E" 'set-abbrev-lang-to-English
   "j" 'ace-jump-mode
   "m" 'menu-bar-mode
   "P" 'prettify-symbols-mode
   "\\" 'zin/org-tag-match-context
   "r" 'er/expand-region
   "L" 'toggle-line-numbers-relative-absolute
   "k" 'kill-buffer))
#+END_SRC

*** Vimish-Fold
#+NAME: USE-PACKAGE-vimish-fold
#+BEGIN_SRC emacs-lisp
(use-package vimish-fold
  :ensure t
  :bind (
    :map evil-visual-state-map
    ("SPC" . vimish-fold)
    :map evil-normal-state-map
    ("SPC" . vimish-fold-toggle)
  )
  :after evil
)
#+END_SRC

** Helm
#+NAME: USE-PACKAGE-helm
#+BEGIN_SRC emacs-lisp
;â”Œâ” Helm Mode: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(use-package helm
  ;; The default "C-x c" is quite close to "C-x C-c", which quits Emacs.
  ;; Changed to "C-c h". Note: We must set "C-c h" globally, because we
  ;; cannot change `helm-command-prefix-key' once `helm-config' is loaded.
  :demand t
  :bind (
     ("Å“"         . helm-M-x)
     ("C-c h o"   . helm-occur)
     ("<f1> SPC"  . helm-all-mark-rings) ; I modified the keybinding
     ("M-y"       . helm-show-kill-ring)
     ("C-c h x"   . helm-register)    ; C-x r SPC and C-x r j
     ("<menu>"    . helm-M-x)
     ("C-c h g"   . helm-google-suggest)
     ("C-c h M-:" . helm-eval-expression-with-eldoc)
     ("C-x C-f"   . helm-find-files)
  )
)
#+END_SRC

** Ace-Jump
#+NAME: USE-PACKAGE-ace-jump-mode
#+BEGIN_SRC emacs-lisp
(use-package ace-jump-mode
  :ensure t
  :after evil
  :bind
  ("Ã¯" . ace-jump-mode))  ;; Bind ace-jump-mode to the desired key in normal state
#+END_SRC

** Language Server Protocol                                          :JS:LSP:
This code will automatically install lsp-mode and set it up to run when opening JavaScript files:
#+BEGIN_SRC emacs-lisp
(use-package lsp-mode
  :ensure t
  :hook (js-mode . lsp)
  :commands lsp
  :config
  (setq lsp-prefer-flymake nil)) ;; Use flycheck for diagnostics instead of flymake:
#+END_SRC

*** LSP User Interface
To enhance the user interface with LSP, install `lsp-ui`, which provides features like documentation popups, code lenses, and more:
#+BEGIN_SRC emacs-lisp
(use-package lsp-ui
  :ensure t
  :hook (js-mode . lsp-ui-mode)
  :commands lsp-ui-mode)
#+END_SRC

** key-chord
#+NAME: USE-PACKAGE-key-chord
#+BEGIN_SRC emacs-lisp
(use-package key-chord
  :ensure t
  :after (evil helm)
  :config
  (key-chord-mode 1)
  (key-chord-define-global                 "jk" 'helm-M-x)
  (key-chord-define evil-insert-state-map  "jk" 'evil-normal-state)
)
#+END_SRC

** TRAMP
#+NAME: USE-PACKAGE-tramp
#+BEGIN_SRC emacs-lisp
(use-package tramp
  :init
  ;; Set default connection method for TRAMP
  (setq tramp-default-method "ssh")
  :config
  (add-to-list 'tramp-default-user-alist
               '("smb" ".*\\'" "alex.stragies"))
)
#+END_SRC

** Yasnippet                                                      :yasnippet:
*** List of installed yasnippets
#+NAME: List-installed-yasnippets
#+HEADER: :tangle no :dir (concat (getenv "HOME") "/.emacs.d/")
#+HEADER: :colnames yes :post add-header-line(*this*)
#+BEGIN_SRC sh
  echo Mode Snippet
  find snippets/ -path snippets/.git -prune -o -type f  -print \
      | grep -v 'README.org' \
      | sed -e 's|snippets/||;s|/| |' | sort
#+END_SRC

#+RESULTS: List-installed-yasnippets
| Mode              | Snippet                           |
|-------------------+-----------------------------------|
| graphviz-dot-mode | edge-with-attributes-bracket      |
| graphviz-dot-mode | image-attribute                   |
| graphviz-dot-mode | invisible-point                   |
| graphviz-dot-mode | node-with-attributes              |
| graphviz-dot-mode | node-with-shape-and-label         |
| graphviz-dot-mode | shape-attribute                   |
| graphviz-dot-mode | style-invisible                   |
| graphviz-dot-mode | tooltip-attribute                 |
| graphviz-dot-mode | url-attribute                     |
| graphviz-dot-mode | url-attribute-with-injected-class |
| graphviz-dot-mode | url-attribute-with-target         |
| org-mode          | Dot-Graph-Template                |
| org-mode          | header-item                       |
| org-mode          | Insert-Org-Header-Args            |
| org-mode          | Named-Source-Code-Block           |
| org-mode          | table2                            |
| org-mode          | table3                            |

*** YASnippet options
#+NAME: YASnippet-options
#+BEGIN_SRC emacs-lisp
(setq yas-triggers-in-field t)
#+END_SRC

** Wind-Move
#+NAME: USE-PACKAGE-windmove
#+BEGIN_SRC emacs-lisp
(use-package windmove
  ;; For readers: don't ensure means that we don't need to download it. It is built in
  :ensure nil
  :config
  (windmove-default-keybindings 'hyper)
  (setq windmove-wrap-around t)
)
#+END_SRC

** Auto-Complete
#+NAME: USE-PACKAGE-auto-complete
#+BEGIN_SRC emacs-lisp

#+END_SRC

** Column-Marker
#+NAME: USE-PACKAGE-column-marker
#+BEGIN_SRC emacs-lisp
(use-package column-marker
  :load-path "contrib/column-marker/"
)
#+END_SRC

** Other packages

These packages do not (yet?) have a dedicated chapter above.

#+NAME: Table-My-Packages
| Package Name          | Package Usage                     | Initialization               | after             | Hooks | Commands |
|-----------------------+-----------------------------------+------------------------------+-------------------+-------+----------|
| auto-complete         |                                   |                              |                   |       |          |
| buffer-move           |                                   |                              |                   |       |          |
| emmet-mode            | [[https://github.com/smihica/emmet-mode][type HTML quickly with CSS syntax]] |                              |                   |       |          |
| evil-matchit          | Plugin for E.VI.L                 |                              | evil              |       |          |
| evil-surround         | Plugin for E.VI.L                 |                              | evil              |       |          |
| expand-region         |                                   |                              |                   |       |          |
| helm                  | Helm                              |                              |                   |       |          |
| highlight-indentation |                                   | highlight-indentation-mode 1 |                   |       |          |
| key-chord             |                                   |                              |                   |       |          |
| magit                 |                                   | (require 'magit)             |                   |       |          |
| org-ac                |                                   |                              | org auto-complete |       |          |
| org-evil              |                                   |                              | evil              |       |          |
| evil-vimish-fold      |                                   |                              | evil vimish-fold  |       |          |
| rainbow-mode          | colorizes in-buffer color codes   | (rainbow-mode)               |                   |       |          |
| yasnippet             | typing speed-up with templates    | (yas-global-mode)            |                   |       |          |
| yasnippet-snippets    |                                   |                              | yasnippet         |       |          |
| ztree                 | Not used yet                      |                              |                   |       |          |

After each modification of the above table, the function Make-Use-Package-Block below must be called.

*** Use-package

#+NAME: Make-Use-Package-Block
#+HEADER: :results output code raw :results_switches ":tangle no"
#+HEADER: :wrap SRC emacs-lisp
#+HEADER: :var package-names=Table-My-Packages
#+HEADER: :tangle no :colnames t
#+BEGIN_SRC emacs-lisp
(defun generate-use-package-declarations (table)
  "Generate 'use-package' declarations for the packages in the input TABLE."
  (interactive)
  (dolist (row table)  ; Iterate over each row in the table
    (let ((pkg (car row))            ; Extract the package name
          (p-config  (nth 2 row))       ; Extract the package init
          (p-hooks (nth 4 row))       ; Extract the package init
          (p-after (nth 3 row)))     ; Extract the package dependencies
      (cl-labels
          ((wrap-with-prefix
             (prefix str)
             (if (not (string-empty-p str))
                 (concat prefix
                         (if (and (string-prefix-p "(" str)
                                (string-suffix-p ")" str))
                             str (concat "(" str ")")))
               "")))  ; Return empty string if `str` is empty
        (princ
         (format
          "; Package: %s\n(use-package %s\n  :ensure t%s%s%s)\n\n"
          pkg pkg
          (wrap-with-prefix "\n  :after\n  "   p-after)
          (wrap-with-prefix "\n  :hook\n  "    p-hooks)
          (wrap-with-prefix "\n  :config\n  "  p-config)  ))))))

;; Call the function with the 'package-names' variable
(generate-use-package-declarations package-names)
#+END_SRC

#+RESULTS: Make-Use-Package-Block
#+begin_SRC emacs-lisp
; Package: auto-complete
(use-package auto-complete
  :ensure t)

; Package: buffer-move
(use-package buffer-move
  :ensure t)

; Package: emmet-mode
(use-package emmet-mode
  :ensure t)

; Package: evil-matchit
(use-package evil-matchit
  :ensure t
  :after
  (evil))

; Package: evil-surround
(use-package evil-surround
  :ensure t
  :after
  (evil))

; Package: expand-region
(use-package expand-region
  :ensure t)

; Package: helm
(use-package helm
  :ensure t)

; Package: highlight-indentation
(use-package highlight-indentation
  :ensure t
  :config
  (highlight-indentation-mode 1))

; Package: key-chord
(use-package key-chord
  :ensure t)

; Package: magit
(use-package magit
  :ensure t
  :config
  (require 'magit))

; Package: org-ac
(use-package org-ac
  :ensure t
  :after
  (org auto-complete))

; Package: org-evil
(use-package org-evil
  :ensure t
  :after
  (evil))

; Package: evil-vimish-fold
(use-package evil-vimish-fold
  :ensure t
  :after
  (evil vimish-fold))

; Package: rainbow-mode
(use-package rainbow-mode
  :ensure t
  :config
  (rainbow-mode))

; Package: yasnippet
(use-package yasnippet
  :ensure t
  :config
  (yas-global-mode))

; Package: yasnippet-snippets
(use-package yasnippet-snippets
  :ensure t
  :after
  (yasnippet))

; Package: ztree
(use-package ztree
  :ensure t)

#+end_SRC

** Package auto-install                                 :OLD:ELISP:AUTO_HIDE:
Code block to verify installation of the specified packages, and install them if they are not.

#+NAME: Install-My-Packages
#+BEGIN_SRC emacs-lisp :noweb yes :colnames t :var pNames=Table-My-Packages[,0] :tangle no
(dolist (package pNames)
  (unless (package-installed-p (intern package ))
    (message "Package %s is not installed, fetching" package)
    (package-install (intern package))
))
#+END_SRC

** Package initialization code                            :OLD:AWK:AUTO_HIDE:

From the above table, the =AWK= code block below receives the third column and

#+NAME: AWK-Extract-Init-Strings
#+BEGIN_SRC awk :stdin Table-My-Packages[,2]
/^\(.*\)$/
#+END_SRC

extracts the initialization strings lines delimited by parenthesis into the below =emacs-lisp= block:

#+RESULTS: AWK-Extract-Init-Strings
#+BEGIN_SRC emacs-lisp :tangle no
(rainbow-mode)
(yas-global-mode)
(vimish-fold-mode)
#+END_SRC

* Other Visual Customization                                         :Visual:
** Config Section Header                                          :AUTO_HIDE:
#+NAME: Section-Header-Visual
#+BEGIN_SRC emacs-lisp
;â”Œâ” Visual customizations: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#+END_SRC

** Show Whitespace

This configuration is useful to show erronenous whitespace.

#+BEGIN_SRC emacs-lisp
(require 'whitespace)
(setq whitespace-style '(face empty tabs trailing))
(global-whitespace-mode t)
#+END_SRC

** Show pretty symbols for things like lambda, etc                  :Symbols:

#+NAME: Symbol-Table
| Ugly               | Mode       | Pretty | Reason                      |
|--------------------+------------+--------+-----------------------------|
| forEach            | js         | âˆ€      | std Math Symbol             |
| for                | js         | â†»     | Looping construct           |
| in                 | js         | âˆŠ      | "element of"                |
| function           | js         | Î»      | std gr. lambda              |
| <=                 | js         | â‰¤      | smaller  or equal           |
| >=                 | js         | â‰¥      | greater or equal            |
| =>                 | js         | â¤‡     | "follows"                   |
| ^=                 | js         | â‰™      |                             |
| ==                 | js         | â‰¡      |                             |
| ===                | js         | â‰£      |                             |
| var                | js         | ğ•     |                             |
| getElementById     | js         | ê–›     | â‹•                          |
| querySelector      | js         | ğ‘¸     |                             |
| querySelectorAll   | js         | â„š      |                             |
| insertAdjacentHTML | js         | @      |                             |
| document           | js         | ğ”»     |                             |
| .parentNode        | js         | â„™      |                             |
| info               | js         | â“˜     |                             |
| async              | js         | â‘‚      | "fork"                      |
| beforebegin        | js         | â¬‘     | "back and up the tag stack" |
| null               | js         | â¦°     | "Empty Set"                 |
| createElement      | js         | â’¸     |                             |
| console            | js         | ğŸ–³     |                             |
| .classList         | js         | â„‚      |                             |
| insertBefore       | js         | â¥¶     | "Place before tag"          |
| appendChild        | js         | â¥¸     | "Place after tag"           |
| while              | js         | âŒ›    |                             |
| true               | js         | â‘      | True, binary one            |
| false              | js         | â“ª     | False, binary zero          |
| if                 | js         | â‡    |                             |
| alert              | js         | â“     |                             |
| from               | js         | â†¤    |                             |
| +=                 | js         | â¥†     |                             |
| return             | js         | â†²      |                             |
| replace            | js         | â†•      |                             |
| body               | js         | ğ”¹     |                             |
| innerText          | js         | ğ•‹     |                             |
| innerHTML          | js         | â„      |                             |
| dolist             | emacs-lisp | âˆ€      | see js/forEach              |
| eq                 | emacs-lisp | â‰Ÿ      |                             |
| setq               | emacs-lisp | â‰”      |                             |
| nil                | emacs-lisp | âˆ…    |                             |
| if                 | emacs-lisp | â‡    |                             |
| unless             | emacs-lisp | âˆ      |                             |
| not                | emacs-lisp | Â¬      |                             |
| defun              | emacs-lisp | ğ”½     |                             |
| define-key         | emacs-lisp | ğ”»     |                             |
| message            | emacs-lisp | ğ•„     |                             |
| :extend            | emacs-lisp | â­²     | Fill to the right           |
| :background        | emacs-lisp | â–ˆ      |                             |
| :underline         | emacs-lisp | â–      |                             |
| :overline          | emacs-lisp | â–”      |                             |
| progn              | emacs-lisp | ğŒ†     | List of expressions         |
| require            | emacs-lisp | â„      |                             |
| kbd                | emacs-lisp | ğ•‚     |                             |
| and                | emacs-lisp | âˆ§      |                             |
| add-hook           | emacs-lisp | â„      |                             |
| \#+BEGIN_SRC                 | org        | âœ      |                             |
| \#+begin_SRC                 | org        | âœ      |                             |
| \#+END_SRC                | org        | â®´     |                             |
| \#+end_SRC                | org        | â®´     |                             |
| :var                 | org        | ğ•     |                             |
| #+NAME:                  | org        | â„•      |                             |
| #+RESULTS:                  | org        | â„      |                             |
| #+HEADER:                | org        | â–¶    |                             |
| defun              | Unused     | ğ•—      |                             |
| defun              | Unused     | â’»     |                             |
| add-hook           | Unused     | â’½     |                             |
| define-key         | Unused     | â’¹     |                             |
| for                | python     | â†»     |                             |
| in                 | python     | âˆŠ      |                             |

After modifying the above table you have to call the function below:
#+NAME: AWK-Process-Table-Call
#+CALL: AWK-Process-Table()
to recreate the lisp-code with the new above definitions.

#+BEGIN_SRC emacs-lisp
(setq-default prettify-symbols-unprettify-at-point t)
(global-prettify-symbols-mode)

;; Block for resetting the hooks while testing:
;;(setq emacs-lisp-mode-hook nil)
;;(setq js-mode-hook nil)
;;(setq python-mode-hook nil)
#+END_SRC

#+RESULTS: AWK-Process-Table-Call
#+begin_SRC emacs-lisp
(add-hook 'js-mode-hook
  (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
    '(
      ("replace"             . ?â†•)
      ("+="                  . ?â¥†)
      ("from"                . ?â†¤)
      ("function"            . ?Î»)
      ("innerText"           . ?ğ•‹)
      ("querySelectorAll"    . ?â„š)
      ("insertBefore"        . ?â¥¶)
      ("async"               . ?â‘‚)
      (".parentNode"         . ?â„™)
      ("insertAdjacentHTML"  . ?@)
      ("body"                . ?ğ”¹)
      ("createElement"       . ?â’¸)
      ("<="                  . ?â‰¤)
      ("innerHTML"           . ?â„)
      ("document"            . ?ğ”»)
      ("getElementById"      . ?ê–›)
      ("=="                  . ?â‰¡)
      ("querySelector"       . ?ğ‘¸)
      ("=>"                  . ?â¤‡)
      (">="                  . ?â‰¥)
      ("appendChild"         . ?â¥¸)
      ("in"                  . ?âˆŠ)
      ("for"                 . ?â†»)
      ("forEach"             . ?âˆ€)
      ("console"             . ?ğŸ–³)
      ("var"                 . ?ğ•)
      ("return"              . ?â†²)
      ("false"               . ?â“ª)
      ("null"                . ?â¦°)
      ("info"                . ?â“˜)
      ("alert"               . ?â“)
      ("while"               . ?âŒ›)
      ("beforebegin"         . ?â¬‘)
      (".classList"          . ?â„‚)
      ("==="                 . ?â‰£)
      ("if"                  . ?â‡)
      ("true"                . ?â‘ )
      ("^="                  . ?â‰™)
     ))))

(add-hook 'emacs-lisp-mode-hook
  (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
    '(
      ("unless"              . ?âˆ)
      (":underline"          . ?â–)
      ("dolist"              . ?âˆ€)
      ("defun"               . ?ğ”½)
      ("kbd"                 . ?ğ•‚)
      ("and"                 . ?âˆ§)
      ("eq"                  . ?â‰Ÿ)
      ("add-hook"            . ?â„)
      (":background"         . ?â–ˆ)
      (":overline"           . ?â–”)
      (":extend"             . ?â­²)
      ("setq"                . ?â‰”)
      ("require"             . ?â„)
      ("progn"               . ?ğŒ†)
      ("define-key"          . ?ğ”»)
      ("nil"                 . ?âˆ…)
      ("not"                 . ?Â¬)
      ("message"             . ?ğ•„)
      ("if"                  . ?â‡)
     ))))

(add-hook 'org-mode-hook
  (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
    '(
      ("#+RESULTS:"          . ?â„)
      ("\#+END_SRC"          . ?â®´)
      ("#+HEADER:"           . ?â–¶)
      ("#+NAME:"             . ?â„•)
      ("\#+begin_SRC"        . ?âœ)
      ("\#+BEGIN_SRC"        . ?âœ)
      (":var"                . ?ğ•)
      ("\#+end_SRC"          . ?â®´)
     ))))

(add-hook 'python-mode-hook
  (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
    '(
      ("in"                  . ?âˆŠ)
      ("for"                 . ?â†»)
     ))))

#+end_SRC

#+NAME: AWK-Process-Table
#+BEGIN_SRC awk :stdin Symbol-Table
NR<2 {next;}
{res[$2][$1]=$3}
ml<length($1){ml=length($1)}
END {
  for (mode in res) {
    if (mode=="Unused") continue;
    print "(add-hook '"mode"-mode-hook"
    print "  (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))"
    print "    '("
    for (item in res[mode]) {
      padding = gensub(/ /, " ", "g", sprintf("%*s", ml+1-length(item), ""))
      printf "      (\"%s\"%s . ?%s)\n" , item , padding, res[mode][item]
    }
    print "     ))))\n"
  }
}
#+END_SRC

#+NAME: Make-Pretty-Pairs
#+HEADER: :var prettifyable=Symbol-Table
#+HEADER: :var targetMode="DoesNotExist" :results list
#+BEGIN_SRC emacs-lisp :noweb yes :tangle no
(let ((res nil))
  (dolist (row prettifyable)
    (when (string= (nth 1 row ) targetMode)
      (push (cons (car row) (string-to-char (nth 2 row))) res)
    )
  )
  res
)
#+END_SRC

*** TODO make it unprettify at point in SourceCode blocks
Doesnt work yet, until when CodeBlock is opened seperate frame with =C-c C-'=
#+BEGIN_SRC emacs-lisp
(setq prettify-symbols-unprettify-at-point t)
#+END_SRC


* Org mode customizations                                               :Org:
** Some tool functions for org                                        :Tools:
#+BEGIN_SRC emacs-lisp
(defun zin/org-tag-match-context (&optional todo-only match)
    "Identical search to `org-match-sparse-tree', but shows the content of the matches."
   (interactive "P")
  (org-agenda-prepare-buffers (list (current-buffer)))
   (org-overview)
   (org-remove-occur-highlights)
  (org-scan-tags '(progn (org-show-entry)
                         (org-show-context))
(cdr (org-make-tags-matcher match)) todo-only))
#+END_SRC

** Org Visual Customizations                                         :Visual:

This Chapter contains some visual customizations for org-mode

#+BEGIN_SRC emacs-lisp
  (setq org-src-fontify-natively t)

  (require 'color)
#+END_SRC

*** Source code blocks formatting

This configuration colors the opening '#+BEGIN_' and closing '#+END_'-'SRC' statements with a different (greenish) color, so that these blocks stand out more from the surrounding text.

The first block below is for the '#+BEGIN_' line, the second one for the background of the actual code block, and the third block for the '#+END_' line.
#+BEGIN_SRC emacs-lisp
  (add-hook 'org-mode-hook
     (lambda ()
       (if (window-system)
           (progn (custom-set-faces
               ; Face used for the line delimiting the begin of source blocks.
               '(org-block-begin-line
                 ((t (:background "#EAEAFF" :extend t :foreground "#008ED1" :underline "#A7A6AA"))))
               ; Face used for the line delimiting the end of source blocks.
               '(org-block-end-line
                 ((t (:background "#EAEAFF" :extend t :foreground "#008ED1" :overline "#A7A6AA"))))
               ; Face used for the source blocks background.
               '(org-block
                 ((t (:background "#EFF0F1" :extend t))))
               )))))

  (setq org-src-block-faces
     '(
       ("emacs-lisp" (:background "#ececff" :extend t))
       ("awk"        (:background "#ecffec"))
       ("python"     (:background "#E5FFB8" ))
      ))
#+END_SRC

** Org Keys                                                            :Keys:
#+BEGIN_SRC emacs-lisp
;â”Œâ” Key Bindings: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(define-key global-map "\C-cc" 'org-capture)
#+END_SRC

** Org Babel                                                          :Babel:
#+BEGIN_SRC emacs-lisp
(org-babel-do-load-languages 'org-babel-load-languages
    '(
        (shell      . t)
        (R          . t)
        (awk        . t)
        (sqlite     . t)
        (emacs-lisp . t)
        (dot        . t)
        (gnuplot    . t)
        (ansible    . t)
    )
)

;;; Personal Library of Babel. Use the first command, if you want to use a
;;; single library-of-babel.org file:
(org-babel-lob-ingest "~/.emacs.d/library-of-babel.org")
;;; Or this block, if you'd prefer to split your library into several files:
(funcall (lambda (dir)
         (if (file-directory-p dir)
             (mapcar (lambda (file) (org-babel-lob-ingest file))
                     (directory-files dir t ".+\\.org?$" t ))))
       "~/.emacs.d/library-of-babel")

;; add default arguments to use when evaluating a source block
(add-to-list 'org-babel-default-header-args:emacs-lisp
             '(:noweb . "yes"))
#+END_SRC

** Org Misc                                                        :Unsorted:
#+BEGIN_SRC emacs-lisp
  ;;; Additions to the org mode template alist.
  ;;; Note: Most of the templates are defined as yasnippets
  (add-to-list 'org-structure-template-alist '("n" "#+NAME: ?"))

  (setq org-default-notes-file (concat org-directory "/notes.org"))
#+END_SRC

* Multilingual Abbreviations & Spelling                           :Languages:
** Tool functions for language switching etc
#+BEGIN_SRC emacs-lisp
;â”Œâ” Spelling Correction & Dictionaries: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

; Setup spelling correction for 4 languages
(let ((langs '("american" "francais" "deutsch8" "castellano8" "portuguese")))
  (setq lang-ring (make-ring (length langs)))
  (dolist (elem langs) (ring-insert lang-ring elem)))

;; A bunch of functions to change the abbrev tables
(defun set-abbrev-lang-to-English () "" (interactive)
       (setq local-abbrev-table lang-american-mode-abbrev-table))

(defun set-abbrev-lang-to-French () "" (interactive)
       (setq local-abbrev-table lang-francais-mode-abbrev-table))

(defun set-abbrev-lang-to-Spanish () "" (interactive)
       (setq local-abbrev-table lang-castellano8-mode-abbrev-table))

(defun set-abbrev-lang-to-Portuguese () "" (interactive)
       (setq local-abbrev-table lang-portuguese-mode-abbrev-table))

(defun set-abbrev-lang-to-German () "" (interactive)
       (setq local-abbrev-table lang-deutsch8-mode-abbrev-table))

(defun cycle-ispell-languages ()
  (interactive)
  (let ((lang (ring-ref lang-ring -1)))
    (ring-insert lang-ring lang)
    (ispell-change-dictionary lang)))

(defun dont-insert-expansion-char ()  t)    ;; this is the "hook" function
  (put 'dont-insert-expansion-char 'no-self-insert t)   ;; the hook should have a "no-self-insert"-property set
#+END_SRC

** Abbreviation file(s)                                               :Files:
#+BEGIN_SRC emacs-lisp
(setq abbrev-file-name             ;; tell emacs where to read abbrev
   "~/.emacs.d/Abbrev/abbrev_defs")    ;; definitions from (does not work)...
(setq save-abbrevs t)
#+END_SRC

** Enabling Abbrevs                                                   :Setup:
#+BEGIN_SRC emacs-lisp
(setq-default abbrev-mode t)
#+END_SRC

** Language Keys                                                       :Keys:

Here we set some keys for comfortably switching between languages

#+BEGIN_SRC emacs-lisp
(global-set-key [f6] 'cycle-ispell-languages)
(global-set-key [f7] 'flyspell-mode)
(global-set-key (kbd "C-:") 'flyspell-auto-correct-previous-word)
(global-set-key (kbd "Â¢") 'flyspell-auto-correct-previous-word)

(global-set-key (kbd "H-e") 'set-abbrev-lang-to-English)
(global-set-key (kbd "H-f") 'set-abbrev-lang-to-French)
(global-set-key (kbd "H-s") 'set-abbrev-lang-to-Spanish)
(global-set-key (kbd "H-p") 'set-abbrev-lang-to-Portuguese)
(global-set-key (kbd "H-g") 'set-abbrev-lang-to-German)
#+END_SRC

* OLD CONFIG
#+BEGIN_SRC emacs-lisp :comments org

;(require 'highlight-indentation)
;(highlight-indentation-mode 1)

;;(require 'column-marker)
;;(column-marker-1 79)
;;(column-marker-2 89)
;;(column-marker-3 109)
;(column-marker-create column-marker-4 column-marker-1-face)
;(column-marker-create column-marker-5 column-marker-1-face)
;(column-marker-4 2)
;(column-marker-5 4)
;(column-marker-create column-marker-6 column-marker-1-face)

;â”Œâ” Behavior customization: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
;â””â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

;;(define-key evil-insert-state-map (kbd "<tab>") 'dabbrev-completion)

(global-set-key (kbd "C-x g") 'magit-status)

(require 'buffer-move) ;; Keybindings defined below
; CTRL+<ARROWS> move between Buffers, and wrap around.

;;(add-hook 'prog-mode-hook 'rainbow-delimiters-mode)

(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/ac-dict")
(ac-config-default)
;(global-auto-complete-mode tâ€™)

;(setq auto-save-file-name-transforms
;      `((".*" ,temporary-file-directory t)))

(setq gnutls-algorithm-priority "NORMAL:-VERS-TLS1.3")

;;(set-variable indent-tabs-mode nil)
(setq indent-tabs-mode nil)
(setq js-indent-level 2)
#+END_SRC

